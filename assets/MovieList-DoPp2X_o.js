import{k as i,o as N,l as r,C as L,T as c,m as x,q as k,v as F,D as v,w as $,B as g,x as A}from"./index-DzzYfTMJ.js";var E=Object.defineProperty,y=Object.getOwnPropertySymbols,G=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,w=(t,e,a)=>e in t?E(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,h=(t,e)=>{for(var a in e||(e={}))G.call(e,a)&&w(t,a,e[a]);if(y)for(var a of y(e))P.call(e,a)&&w(t,a,e[a]);return t};const B=(t,e)=>{const a=i.useContext(N),n=h(h({},a),t);return i.createElement("svg",h({width:"1.5em",height:"1.5em",strokeWidth:1.5,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:"currentColor",ref:e},n),i.createElement("path",{d:"M6.75827 17.2426L12.0009 12M17.2435 6.75736L12.0009 12M12.0009 12L6.75827 6.75736M12.0009 12L17.2435 17.2426",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}))},I=i.forwardRef(B);var W=I,_=Object.defineProperty,b=Object.getOwnPropertySymbols,z=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable,C=(t,e,a)=>e in t?_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,f=(t,e)=>{for(var a in e||(e={}))z.call(e,a)&&C(t,a,e[a]);if(b)for(var a of b(e))U.call(e,a)&&C(t,a,e[a]);return t};const H=(t,e)=>{const a=i.useContext(N),n=f(f({},a),t);return i.createElement("svg",f({width:"1.5em",height:"1.5em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:"currentColor",ref:e},n),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.9999 3.94228C13.1757 2.85872 14.7069 2.25 16.3053 2.25C18.0313 2.25 19.679 2.95977 20.8854 4.21074C22.0832 5.45181 22.75 7.1248 22.75 8.86222C22.75 10.5997 22.0831 12.2728 20.8854 13.5137C20.089 14.3393 19.2938 15.1836 18.4945 16.0323C16.871 17.7562 15.2301 19.4985 13.5256 21.14L13.5216 21.1438C12.6426 21.9779 11.2505 21.9476 10.409 21.0754L3.11399 13.5136C0.62867 10.9374 0.62867 6.78707 3.11399 4.21085C5.54605 1.68984 9.46239 1.60032 11.9999 3.94228Z",fill:"currentColor"}))},q=i.forwardRef(H);var K=q;const V={imageUrl:"https://image.tmdb.org/t/p/w500",maxTrendingMovies:40},M=t=>`${V.imageUrl}${t}`,Y=[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}],Z=[{id:10759,name:"Action & Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:10762,name:"Kids"},{id:9648,name:"Mystery"},{id:10763,name:"News"},{id:10764,name:"Reality"},{id:10765,name:"Sci-Fi & Fantasy"},{id:10766,name:"Soap"},{id:10767,name:"Talk"},{id:10768,name:"War & Politics"},{id:37,name:"Western"}],J=(t,e)=>{const s=(e==="movie"?Y:Z).filter(o=>t.includes(o.id)).map(o=>o.name);return s!=null&&s.length?s.join(", "):"-"},D=(t,e)=>{const a=new Date(t);return e?a.getFullYear():a.toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"})},Q=i.forwardRef(({onClick:t,movie:e},a)=>r.jsx(L,{ref:a,className:"rounded-md overflow-hidden bg-white border-0 cursor-pointer",onClick:t,"data-testid":`movie-${e.id}`,children:r.jsxs("div",{children:[r.jsx("div",{className:"aspect-[2/3] w-full bg-gray-100 relative",children:r.jsx("img",{src:M(e.poster_path),alt:e.title,className:"absolute inset-0 w-full h-full object-cover"})}),r.jsxs("div",{className:"px-3 py-2 ",children:[r.jsx(c,{className:"leading-[1.4] line-clamp-2",children:e.title}),r.jsx(c,{type:"small",className:"text-gray-600",children:D(e.release_date,!0)})]})]})})),j=t=>t.session.favorite,X=()=>{const t=x(j),e=k();return i.useCallback(a=>{t.find(s=>s.id===a.id)||e(F([a,...t]))},[e,t])},ee=()=>{const t=x(j),e=k();return i.useCallback(a=>{const n=t.findIndex(s=>s.id===a);if(n>-1&&t.length>0){const s=[...t];s.splice(n,1),e(F(s))}},[e,t])},te=({open:t,movie:e,onClose:a})=>{const n=X(),s=ee(),d=x(j).find(u=>u.id===e.id),m=()=>{d?s(e.id):n(e)};return r.jsx(v,{open:t,size:"lg",onOpenChange:a,children:r.jsx(v.Overlay,{children:r.jsxs(v.Content,{className:"p-0",children:[r.jsx(v.DismissTrigger,{as:$,size:"sm",variant:"ghost",color:"secondary",isCircular:!0,className:"absolute right-2 top-2 z-10 bg-black bg-opacity-50",onClick:a,"data-testid":"close-dialog-button",children:r.jsx(W,{className:"h-5 w-5 text-white"})}),r.jsx("img",{src:M(e.backdrop_path),className:"w-full"}),r.jsxs("div",{className:"p-5",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-3 flex-nowrap",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx(c,{type:"h6",className:"leading-[1.4] font-semibold",children:e.title}),r.jsxs(c,{type:"small",className:"text-gray-600",children:["Release date: ",D(e.release_date)]})]}),r.jsx("div",{className:"shrink-0",children:d?r.jsxs(g,{onClick:m,variant:"outline",children:[r.jsx(K,{className:"mr-2"}),"Added to favorites"]}):r.jsxs(g,{onClick:m,variant:"solid",className:"border-primary hover:bg-primary-dark hover:border-primary-dark",children:[r.jsx(A,{className:"mr-2"})," Add to favorites"]})})]}),r.jsx("div",{className:"mt-2",children:r.jsxs(c,{type:"small",className:"text-gray-800 font-semibold",children:["Genre: ",J(e.genre_ids,"movie")]})}),r.jsx("div",{className:"mt-3",children:r.jsx(c,{className:"leading-[1.4]",children:e.overview})})]})]})})})},re=({movies:t,isLoading:e,hasMore:a,onShowMore:n})=>{const[s,o]=i.useState(!1),[d,m]=i.useState(),u=i.useRef(null),O=l=>{m(l),o(!0)},T=()=>{o(!1),m(void 0)},R=()=>r.jsx("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-4 mt-4",children:[0,1,2,3].map(l=>r.jsx("div",{className:"max-w-full animate-pulse mt-4",children:r.jsx("div",{className:"relative grid h-80 place-items-center bg-gray-300 rounded-md"})},l.toString()))}),S=()=>{n==null||n(),setTimeout(()=>{var p;const l=((p=u.current)==null?void 0:p.offsetTop)||0;window.scrollTo({top:l-50,behavior:"smooth"})},200)};return!e&&t.length===0?r.jsx("div",{className:"mt-8",children:r.jsx(c,{children:"No movie found"})}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-4 mt-8",children:t.map((l,p)=>r.jsx(Q,{movie:l,onClick:()=>O(l),ref:p===t.length-1?u:null},l.id))}),a&&r.jsx("div",{className:"flex justify-center mt-8",children:r.jsx(g,{onClick:S,variant:"outline","data-testid":"show-more-button",children:"Show more"})}),e&&R(),d&&r.jsx(te,{open:s,movie:d,onClose:T})]})};export{re as M,V as c,j as f};
